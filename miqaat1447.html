<!DOCTYPE html>
<html>
  <head>
    <title>Ongoing Miqaats</title>
  </head>
  <body>
    <h1>Ongoing Miqaats</h1>
    <div id="miqaats"></div>

    <script>
      fetch('https://godhrajamaat.onrender.com/api/miqaats/ongoing')
        .then(res => res.json())
        .then(data => {
          const container = document.getElementById('miqaats');
          data.forEach(miqaat => {
            const div = document.createElement('div');
            div.innerHTML = `
              <h3>${miqaat.name}</h3>
              <p>Date: ${new Date(miqaat.date).toLocaleString()}</p>
              <iframe width="100%" height="215" 
                src="https://www.youtube.com/embed/${miqaat.youtubeEmbed}" 
                frameborder="0" allowfullscreen>
              </iframe>
              <hr />
            `;
            container.appendChild(div);
          });
        })
        .catch(err => {
          document.getElementById('miqaats').innerText = "Error fetching miqaats.";
          console.error(err);
        });
    </script>
  </body>
</html>
